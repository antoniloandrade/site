!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.VMasker=t()}(this,(function(){var e=[9,16,17,18,36,37,38,39,40,91,92,93],t=function(e){return(e={precision:(e=e||{}).hasOwnProperty("precision")?e.precision:2,separator:e.separator||",",delimiter:e.delimiter||".",unit:e.unit&&e.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:e.suffixUnit&&" "+e.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:e.zeroCents,lastOutput:e.lastOutput}).moneyPrecision=e.zeroCents?0:e.precision,e},n=function(e,t,n){for(;t<e.length;t++)"9"!==e[t]&&"A"!==e[t]&&"S"!==e[t]||(e[t]=n);return e},i=function(e){this.elements=e};i.prototype.unbindElementToMask=function(){for(var e=0,t=this.elements.length;e<t;e++)this.elements[e].lastOutput="",this.elements[e].onkeyup=!1,this.elements[e].onkeydown=!1,this.elements[e].value.length&&(this.elements[e].value=this.elements[e].value.replace(/\D/g,""))},i.prototype.bindElementToMask=function(t){for(var n=this,i=function(i){var o=(i=i||window.event).target||i.srcElement;(function(t){for(var n=0,i=e.length;n<i;n++)if(t==e[n])return!1;return!0})(i.keyCode)&&setTimeout((function(){n.opts.lastOutput=o.lastOutput,o.value=r[t](o.value,n.opts),o.lastOutput=o.value,o.setSelectionRange&&n.opts.suffixUnit&&o.setSelectionRange(o.value.length,o.value.length-n.opts.suffixUnit.length)}),0)},o=0,s=this.elements.length;o<s;o++)this.elements[o].lastOutput="",this.elements[o].onkeyup=i,this.elements[o].value.length&&(this.elements[o].value=r[t](this.elements[o].value,this.opts))},i.prototype.maskMoney=function(e){this.opts=t(e),this.bindElementToMask("toMoney")},i.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},i.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},i.prototype.maskPattern=function(e){this.opts={pattern:e},this.bindElementToMask("toPattern")},i.prototype.unMask=function(){this.unbindElementToMask()};var r=function(e){if(!e)throw new Error("VanillaMasker: There is no element to bind.");var t="length"in e?e.length?e:[]:[e];return new i(t)};return r.toMoney=function(e,n){if((n=t(n)).zeroCents){n.lastOutput=n.lastOutput||"";var i="("+n.separator+"[0]{0,"+n.precision+"})",r=new RegExp(i,"g"),o=e.toString().replace(/[\D]/g,"").length||0,s=n.lastOutput.toString().replace(/[\D]/g,"").length||0;e=e.toString().replace(r,""),o<s&&(e=e.slice(0,e.length-1))}for(var l=e.toString().replace(/[\D]/g,""),a=new RegExp("^(0|\\"+n.delimiter+")"),u=new RegExp("(\\"+n.separator+")$"),p=l.substr(0,l.length-n.moneyPrecision),h=p.substr(0,p.length%3),c=new Array(n.precision+1).join("0"),f=0,g=(p=p.substr(p.length%3,p.length)).length;f<g;f++)f%3==0&&(h+=n.delimiter),h+=p[f];if(h=(h=h.replace(a,"")).length?h:"0",!n.zeroCents){var m=l.length-n.precision,v=l.substr(m,n.precision),d=v.length,y=n.precision>d?n.precision:d;c=(c+v).slice(-y)}return(n.unit+h+n.separator+c+n.suffixUnit).replace(u,"")},r.toPattern=function(e,t){var i,r="object"==typeof t?t.pattern:t,o=r.replace(/\W/g,""),s=r.split(""),l=e.toString().replace(/\W/g,""),a=l.replace(/\W/g,""),u=0,p=s.length,h="object"==typeof t?t.placeholder:void 0;for(i=0;i<p;i++){if(u>=l.length){if(o.length==a.length)return s.join("");if(void 0!==h&&o.length>a.length)return n(s,i,h).join("");break}if("9"===s[i]&&l[u].match(/[0-9]/)||"A"===s[i]&&l[u].match(/[a-zA-Z]/)||"S"===s[i]&&l[u].match(/[0-9a-zA-Z]/))s[i]=l[u++];else if("9"===s[i]||"A"===s[i]||"S"===s[i])return void 0!==h?n(s,i,h).join(""):s.slice(0,i).join("")}return s.join("").substr(0,i)},r.toNumber=function(e){return e.toString().replace(/(?!^-)[^0-9]/g,"")},r.toAlphaNumeric=function(e){return e.toString().replace(/[^a-z0-9 ]+/i,"")},r}));